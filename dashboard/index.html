<!DOCTYPE html>
<html ng-app="coachDashBoard">
<head>
    <title>Coach Dashboard</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">


    <script src="pmodule/angular.min.js"></script>
    <script src="js/coachDashboard/smart-table.min.js"></script>
    <script src="pmodule/angular-animate.js"></script>
    <script src="pmodule/angular-sanitize.js"></script>
    <script src="pmodule/ui-bootstrap-tpls-2.5.0.min.js"></script>
    <link rel="stylesheet" href="pmodule/password_modal.css">
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">

    
    <script src="js/coachDashboard/app.js"></script>
    <link rel="stylesheet" href="css/dashboard.css">

</head>
<body ng-controller="MainCtrl as ctrl">
    <!-- password modal template -->
    <script type="text/ng-template" id="passwordModalContent.html">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-title">The Coach should enter the password</h3>
        </div>
        <div class="modal-body" id="modal-body">
            <label class="item item-input">
                <input ng-model="password" type="password" class="form-control" id="passwordInput" required>
            </label>
            <p class="password-error" ng-show="wrongPassword==true">Sorry, that is not the correct password. Please try again</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-success" type="button" ng-click="$ctrl.checkPassword(password)">OK</button>
            <button class="btn btn-danger" type="button">Cancel</button>
        </div>
    </script>

    <!-- navigation template -->
    <script type="text/ng-template" id="navigation.html">
        <nav id="topnav" class="navbar navbar-default">
          <div class="container-fluid">
            <div id="navlogo" class="navbar-header" >
              <a class="navbar-brand" href="#"></a>
            </div>
            <div id="navtitle">
                <h1>Coach Dashboard</h1>
            </div>

          </div>
        </nav>  
        <nav id="bottomnav" class="navbar navbar-default">
          <div class="container-fluid">
            <ul class="nav nav-tabs">
              <li ng-class="{ active: menu.isSelected(0) }"><a href="#" ng-click="menu.selectTab(0)"><h3>Learners</h3></a></li>
              <li ng-class="{ active: menu.isSelected(1) }"><a href="#" ng-click="menu.selectTab(1)"><h3>Test Results</h3></a></li>
            </ul>
          </div>
        </nav>
    </script>

    <!-- learners table template -->
    <script type="text/ng-template" id="learners.html">
        <div class="table-responsive row">
            <table st-table="users_placeholder" st-safe-src="users" class="table">
            <thead>
              <tr>
                  <th colspan="2">
                    <input st-search type="search" placeholder="Username, First name, or Last name..." class="form-control">
                  </th>
                  <th colspan="1">
                    <input st-search="group_name" type="search" placeholder="Group...." class="form-control">
                  </th>
              </tr>
              <tr>
                <th st-ratio="20" st-sort="username">Username</th>
                <th st-ratio="30" st-sort="first_name">First Name</th>
                <th st-ratio="30" st-sort="last_name">Last Name</th>
                <th st-ratio="20" st-sort="group_name">Group</th>
                  
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="row in users_placeholder">
                <td st-ratio="20">{{row.username}}</td>
                <td st-ratio="30">{{row.first_name}}</td>
                <td st-ratio="30">{{row.last_name}}</td>
                <td st-ratio="20">{{row.group_name}}</td>
              </tr>
            </tbody>
            </table>
        </div> <!-- table row -->
    </script>

    <!-- responses template -->
    <script type="text/ng-template" id="responses.html">
        <div class="table-responsive row">
            <table st-table="results_placeholder" st-safe-src="results" class="table">
                <thead>
                    <tr>
                        <th id="responses_search">
                          <input st-search type="search" placeholder="Username, First name, Last name, Test, Test Date..." class="form-control">
                        </th>                        
                    </tr>
                    <tr>
                        <th st-ratio="20" st-sort="username">Username</th>
                        <th st-ratio="15" st-sort="first_name">First Name</th>
                        <th st-ratio="15" st-sort="last_name">Last Name</th>
                        <th st-ratio="10" st-sort="test_name">Test</th>
                        <th st-ratio="10" st-sort="module">Module</th>
                        <th st-ratio="10" st-sort="score_pct">Score</th>
                        <th st-ratio="10" st-sort="test_date">Test Date</th>
                        <th st-ratio="10" st-sort="coach_id">Coach ID</th>
                    </tr>
                </thead>
                
                    
                <tbody>
                    <tr ng-repeat="result in results_placeholder">
                        <td st-ratio="20">{{result.username}}</td>
                        <td st-ratio="15">{{result.first_name }}</td>
                        <td st-ratio="15">{{result.last_name}}</td>
                        <td st-ratio="10">{{result.test_name}}</td>
                        <td st-ratio="10">{{result.module}}</td>
                        <!-- color the score percent cells using same color scheme from heat map -->
                        <td st-ratio="10"ng-style="result.score_pct <= 0 && {'background-color': '#D9D9D9'} ||
                                      result.score_pct <= .25 && {'background-color': '#FF412A'} ||
                                      result.score_pct <= .50 && {'background-color': '#EC9090'} ||
                                      result.score_pct <= .69 && {'background-color': '#F5C216'} ||
                                      result.score_pct <= .84 && {'background-color': '#99CC33'} ||
                                      result.score_pct <=  1 && {'background-color': '#00B050'}">
                                {{result.score_pct * 100}}%
                        </td>
                        <td st-ratio="10">{{result.test_date | date: 'mediumDate'}}</td>
                        <td st-ratio="10">{{result.coach_id}}</td>
                    </tr>
                </tbody>
            </table>
            
        </div> <!-- table row -->
    </script>
    
    <!-- open password modal when page is loaded(prod only) -->
    <!-- <span ng-init=ctrl.openModal()></span> -->
    
    <navigation></navigation>
    <div class="container-fluid">
        <learners ng-show="menu.isSelected(0)"></learners>
        <responses ng-show="menu.isSelected(1)"></responses>
    </div>

    

</body>
</html>