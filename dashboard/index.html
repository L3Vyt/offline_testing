<!DOCTYPE html>
<html ng-app="coachDashBoard">
<head>
    <title>Coach Dashboard</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">


    <script src="pmodule/angular.min.js"></script>
    <script src="js/coachDashboard/smart-table.min.js"></script>
    <script src="pmodule/angular-animate.js"></script>
    <script src="pmodule/angular-sanitize.js"></script>
    <script src="pmodule/ui-bootstrap-tpls-2.5.0.min.js"></script>
    <link rel="stylesheet" href="pmodule/password_modal.css">
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">

    
    <script src="js/coachDashboard/app.js"></script>
    <link rel="stylesheet" href="css/dashboard.css">

</head>
<body ng-controller="MainCtrl as ctrl">
    <!-- password modal template -->
    <script type="text/ng-template" id="passwordModalContent.html">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-title">The Coach should enter the password</h3>
        </div>
        <div class="modal-body" id="modal-body">
            <label class="item item-input">
                <input ng-model="password" type="password" class="form-control" id="passwordInput" required>
            </label>
            <p class="password-error" ng-show="wrongPassword==true">Sorry, that is not the correct password. Please try again</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-success" type="button" ng-click="$ctrl.checkPassword(password)">OK</button>
            <button class="btn btn-danger" type="button">Cancel</button>
        </div>
    </script>

    <!-- navigation template -->
    <script type="text/ng-template" id="navigation.html">
        <nav id="topnav" class="navbar navbar-default">
          <div class="container-fluid">
            <div id="navlogo" class="navbar-header" >
              <a class="navbar-brand" href="#"></a>
            </div>
            <div id="navtitle">
                <h1>Coach Dashboard</h1>
            </div>

          </div>
        </nav>  
        <nav id="bottomnav" class="navbar navbar-default">
          <div class="container-fluid">
            <ul class="nav nav-tabs">
              <li ng-class="{ active: menu.isSelected(0) }">
                <a href="#" ng-click="menu.selectTab(0)"><h3>Learners</h3></a>
              </li>
              <li ng-class="{ active: menu.isSelected(1) }">
                <a href="#" ng-click="menu.selectTab(1)"><h3>Test Results</h3></a>
              </li>              
              <li ng-class="{ active: menu.isSelected(2) }">
                <a href="#" ng-click="menu.selectTab(2)"><h3>Results by Question</h3>
                </a>
              </li>
            </ul>
          </div>
        </nav>
    </script>

    <!-- learners table template -->
    <script type="text/ng-template" id="learners.html">
        <div class="table-responsive row">
            <table st-table="users_placeholder" st-safe-src="users" class="table">
            <thead>
              <tr>
                  <th colspan="2">
                    <input st-search type="search" placeholder="Username, First name, or Last name..." class="form-control">
                  </th>
                  <th colspan="1">
                    <input st-search="group_name" type="search" placeholder="Group...." class="form-control">
                  </th>
              </tr>
              <tr>
                <th st-ratio="20" st-sort="username">Username</th>
                <th st-ratio="30" st-sort="first_name">First Name</th>
                <th st-ratio="30" st-sort="last_name">Last Name</th>
                <th st-ratio="20" st-sort="group_name">Group</th>
                  
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="row in users_placeholder">
                <td st-ratio="20">{{row.username}}</td>
                <td st-ratio="30">{{row.first_name}}</td>
                <td st-ratio="30">{{row.last_name}}</td>
                <td st-ratio="20">{{row.group_name}}</td>
              </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5" class="text-center">
                        <div st-pagination="" st-items-by-page="itemsByPage"></div>
                    </td>
                </tr>
            </tfoot>
            </table>
        </div> <!-- table row -->
    </script>

    <!-- responses template -->
    <script type="text/ng-template" id="responses.html">
        <div class="table-responsive row">
            <table st-table="results_placeholder" st-safe-src="results" class="table">
                <thead>
                    <tr>
                        <th id="responses_search">
                          <input st-search type="search" placeholder="Username, First name, Last name, Test, Test Date..." class="form-control">
                        </th>                        
                    </tr>
                    <tr>
                        <th st-ratio="20" st-sort="username">Username</th>
                        <th st-ratio="15" st-sort="first_name">First Name</th>
                        <th st-ratio="15" st-sort="last_name">Last Name</th>
                        <th st-ratio="10" st-sort="test_name">Test</th>
                        <th st-ratio="10" st-sort="module">Module</th>
                        <th st-ratio="10" st-sort="score_pct">Score</th>
                        <th st-ratio="10" st-sort="test_date">Test Date</th>
                        <th st-ratio="10" st-sort="coach_id">Coach ID</th>
                    </tr>
                </thead>
                
                    
                <tbody>
                    <tr ng-repeat="result in results_placeholder">
                        <td st-ratio="20">{{result.username}}</td>
                        <td st-ratio="15">{{result.first_name }}</td>
                        <td st-ratio="15">{{result.last_name}}</td>
                        <td st-ratio="10">{{result.test_name}}</td>
                        <td st-ratio="10">{{result.module}}</td>
                        <!-- color the score percent cells using same color scheme from heat map -->
                        <td st-ratio="10"ng-style="result.score_pct <= 0 && {'background-color': '#D9D9D9'} ||
                                      result.score_pct <= .25 && {'background-color': '#FF412A'} ||
                                      result.score_pct <= .50 && {'background-color': '#EC9090'} ||
                                      result.score_pct <= .69 && {'background-color': '#F5C216'} ||
                                      result.score_pct <= .84 && {'background-color': '#99CC33'} ||
                                      result.score_pct <=  1 && {'background-color': '#00B050'}">
                                {{result.score_pct * 100}}%
                        </td>
                        <td st-ratio="10">{{result.test_date | date: 'mediumDate'}}</td>
                        <td st-ratio="10">{{result.coach_id}}</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="5" class="text-center">
                            <div st-pagination="" st-items-by-page="itemsByPage"></div>
                        </td>
                    </tr>
                </tfoot>
            </table>
            
        </div> <!-- table row -->
    </script>

    <!-- Test responses with questions -->
    <script type="text/ng-template" id="responses_q.html">
        <div class="table-responsive row">
            <table class="table table-bordered">
                <tr>
                    <th>Username</th>
                    <th>Test</th>
                    <th>Module</th>
                    <th>Coach ID</th>
                    <th>Test Date</th>
                    <th>q1</th>
                    <th>q2</th>
                    <th>q3</th>
                    <th>q4</th>
                    <th>q5</th>
                    <th>q6</th>
                    <th>q7</th>
                    <th>q8</th>
                    <th>q9</th>
                    <th>q10</th>
                    <th>q11</th>
                    <th>q12</th>
                    <th>q13</th>
                    <th>q14</th>
                    <th>q15</th>
                    <th>q16</th>
                    <th>q17</th>
                    <th>q18</th>
                    <th>q19</th>
                    <th>q20</th>
                    <th>q21</th>
                    <th>q22</th>
                    <th>q23</th>
                    <th>q24</th>
                    <th>q25</th>
                    <th>q26</th>
                    <th>q27</th>
                    <th>q28</th>
                    <th>q29</th>
                    <th>q30</th>
                    <th>q31</th>
                    <th>q32</th>
                    <th>q33</th>
                    <th>q34</th>
                    <th>q35</th>
                    <th>q36</th>
                    <th>q37</th>
                    <th>q38</th>
                    <th>q39</th>
                    <th>q40</th>
                    <th>q41</th>
                    <th>q42</th>
                    <th>q43</th>
                    <th>q44</th>
                    <th>q45</th>
                    <th>q46</th>
                    <th>q47</th>
                    <th>q48</th>
                    <th>q49</th>
                    <th>q50</th>
                    <th>q51</th>
                    <th>q52</th>
                    <th>q53</th>
                    <th>q54</th>
                    <th>q55</th>
                    <th>q56</th>
                    <th>q57</th>
                    <th>q58</th>
                    <th>q59</th>
                    <th>q60</th>
                    <th>q61</th>
                    <th>q62</th>
                    <th>q63</th>
                    <th>q64</th>
                    <th>q65</th>
                    <th>q66</th>
                    <th>q67</th>
                    <th>q68</th>
                    <th>q69</th>
                    <th>q70</th>
                </tr>
                <tr ng-repeat="result in results">
                    <td>{{result.username}}</td>
                    <td>{{result.test}}</td>
                    <td>{{result.module}}</td>
                    <td>{{result.coach_id}}</td>
                    <td>{{result.test_date}}</td>
                    <td>{{result.q1}}</td>
                    <td>{{result.q2}}</td>
                    <td>{{result.q3}}</td>
                    <td>{{result.q4}}</td>
                    <td>{{result.q5}}</td>
                    <td>{{result.q6}}</td>
                    <td>{{result.q7}}</td>
                    <td>{{result.q8}}</td>
                    <td>{{result.q9}}</td>
                    <td>{{result.q10}}</td>
                    <td>{{result.q11}}</td>
                    <td>{{result.q12}}</td>
                    <td>{{result.q13}}</td>
                    <td>{{result.q14}}</td>
                    <td>{{result.q15}}</td>
                    <td>{{result.q16}}</td>
                    <td>{{result.q17}}</td>
                    <td>{{result.q18}}</td>
                    <td>{{result.q19}}</td>
                    <td>{{result.q20}}</td>
                    <td>{{result.q21}}</td>
                    <td>{{result.q22}}</td>
                    <td>{{result.q23}}</td>
                    <td>{{result.q24}}</td>
                    <td>{{result.q25}}</td>
                    <td>{{result.q26}}</td>
                    <td>{{result.q27}}</td>
                    <td>{{result.q28}}</td>
                    <td>{{result.q29}}</td>
                    <td>{{result.q30}}</td>
                    <td>{{result.q31}}</td>
                    <td>{{result.q32}}</td>
                    <td>{{result.q33}}</td>
                    <td>{{result.q34}}</td>
                    <td>{{result.q35}}</td>
                    <td>{{result.q36}}</td>
                    <td>{{result.q37}}</td>
                    <td>{{result.q38}}</td>
                    <td>{{result.q39}}</td>
                    <td>{{result.q40}}</td>
                    <td>{{result.q41}}</td>
                    <td>{{result.q42}}</td>
                    <td>{{result.q43}}</td>
                    <td>{{result.q44}}</td>
                    <td>{{result.q45}}</td>
                    <td>{{result.q46}}</td>
                    <td>{{result.q47}}</td>
                    <td>{{result.q48}}</td>
                    <td>{{result.q49}}</td>
                    <td>{{result.q50}}</td>
                    <td>{{result.q51}}</td>
                    <td>{{result.q52}}</td>
                    <td>{{result.q53}}</td>
                    <td>{{result.q54}}</td>
                    <td>{{result.q55}}</td>
                    <td>{{result.q56}}</td>
                    <td>{{result.q57}}</td>
                    <td>{{result.q58}}</td>
                    <td>{{result.q59}}</td>
                    <td>{{result.q60}}</td>
                    <td>{{result.q61}}</td>
                    <td>{{result.q62}}</td>
                    <td>{{result.q63}}</td>
                    <td>{{result.q64}}</td>
                    <td>{{result.q65}}</td>
                    <td>{{result.q66}}</td>
                    <td>{{result.q67}}</td>
                    <td>{{result.q68}}</td>
                    <td>{{result.q69}}</td>
                    <td>{{result.q70}}</td>
                </tr>
            </table>
        </div> <!-- table row -->
    </script>

    
    <!-- open password modal when page is loaded(prod only) -->
    <!-- <span ng-init=ctrl.openModal()></span> -->
    
    <navigation></navigation>
    <div class="container-fluid">
        <learners ng-show="menu.isSelected(0)"></learners>
        <responses ng-show="menu.isSelected(1)"></responses>
        <questresponses ng-show="menu.isSelected(2)"></questresponses>
    </div>

    

</body>
</html>